{{!--
Re-usable card for linking to posts
--}}

<article class="gh-card {{post_class}} bg-base-100 rounded-3xl w-full overflow-hidden h-full shadow-lg">
  <a class="gh-card-link px-4 py-6 flex flex-col h-full" href="{{url}}">
    {{#if feature_image}}
      <picture class="gh-card-picture flex-0">
        <source 
          srcset="
          {{img_url feature_image size="xxs" format="avif"}} 30w,
          {{img_url feature_image size="xs" format="avif"}} 100w,
          {{img_url feature_image size="s" format="avif"}} 300w"
          {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
          type="image/avif"
          {{^if @first}}loading="lazy"{{/if}}
        >
        <source 
          srcset="
          {{img_url feature_image size="xxs" format="webp"}} 30w,
          {{img_url feature_image size="xs" format="webp"}} 100w,
          {{img_url feature_image size="s" format="webp"}} 300w"
          {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
          type="image/webp"
          {{^if @first}}loading="lazy"{{/if}}

        >
        <img
          srcset="
          {{img_url feature_image size="xxs"}} 30w,
          {{img_url feature_image size="xs"}} 100w,
          {{img_url feature_image size="s"}} 300w"
          {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
          src="{{img_url feature_image size="m"}}"
          alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
          class="gh-card-image md:w-full md:h-full"
          {{^if @first}}loading="lazy"{{/if}}
        >
      </picture>
    {{/if}}
    <div class="gh-card-content flex flex-col justify-between flex-1 h-full w-full">
      <h2 class="text-2xl font-bold text-ellipsis line-clamp-4 h-full w-full px-1">{{title}}</h2>
      <div>
        <p class="text-xs gh-card-meta">
          par <span class="text-secondary">{{primary_author.name}}</span>
          <span>&bull;</span> 
          <time datetime="{{date format="YYYY-MM-DD"}}">{{date format="D MMM YYYY"}}</time>
          <br>
          <span>{{reading_time}}</span>
        </p>
        {{!-- <p class="text-base text-justify hidden sm:block">{{excerpt}}</p> --}}
        <span class="btn btn-ghost btn-sm">Lire la suite</span>
      </div>
    </div>
  </a>
</article>
